# 工作台模块 - AI 提示词

## 模块描述
医生端工作台首页，展示医生的工作状态、班次信息、接诊数据、待办提醒等核心业务信息。用户可在此进行签到/签退操作，并快速访问其他功能模块。

## 开发完成情况

### 已完成功能
1. ✅ **页面布局与组件化**
   - 顶部问候区（动态问候语、当前日期）
   - 班次卡片（3种状态：未签到、已签到、待签退）
   - 今日数据看板（4个指标卡片）
   - 快捷操作区（4个快捷入口）
   - 待办提醒区（条件显示）
   - 最近接诊记录（3条记录+查看全部）
   - 底部 Tab 导航栏

2. ✅ **API 接口设计与 Mock**
   - 完整的 API 接口文档（7个接口）
   - 工作台 Mock 数据（3种场景）
   - API 封装层（生产/开发模式切换）

3. ✅ **交互功能**
   - 动态问候语（根据时间变化：早上好/下午好/晚上好）
   - 班次倒计时（每分钟自动更新）
   - 签到/签退功能（带定位要求）
   - 快捷操作导航
   - Tab 切换与徽章显示

4. ✅ **样式与设计**
   - 严格遵循设计系统（主色调、渐变色、圆角、阴影）
   - 响应式布局（rpx 单位适配）
   - 底部 Tab 安全区域适配

### 待完成/可扩展功能
1. 🔄 **实时数据同步**
   - 当前仅使用 Mock 数据，需连接真实后端 API
   - 签到/签退后自动刷新页面数据

2. 🔄 **定位功能完善**
   - 小程序环境下的定位权限处理
   - 定位失败重试机制

3. 🔄 **通知与消息**
   - 实现消息中心功能
   - 待接诊数量的实时更新与推送

4. 🔄 **工作笔记功能**
   - 记录工作中的重要信息
   - 支持图文混排

5. 🔄 **数据统计分析**
   - 每周/每月工作时长统计
   - 接诊情况详细分析

## 关键代码与技术点

### 1. 组件结构
```
src/views/workbench/
├── index.vue                    # 主页面（包含所有逻辑）
└── components/
    ├── GreetingSection.vue      # 问候区
    ├── ShiftCard.vue            # 班次卡片（3种状态）
    ├── DashboardSection.vue     # 数据看板
    ├── ShortcutsSection.vue     # 快捷操作
    ├── RemindersSection.vue     # 待办提醒
    ├── RecentRecordsSection.vue # 接诊记录
    └── TabBar.vue               # Tab 导航
```

### 2. API 层设计
```
src/api/
├── workbench.js                # API 封装（支持开发/生产模式）
├── workbench-mock.js           # Mock 数据（3种场景）
```

### 3. 关键逻辑
- **动态问候语**：根据当前小时数判断（05:00-11:59/12:00-17:59/18:00-04:59）
- **班次倒计时**：计算班次开始时间与当前时间差值
- **三态班次卡片**：根据 status 字段动态切换显示内容
- **定位签到/签退**：调用 uni.getLocation() 获取坐标，传给后端

### 4. 数据驱动原则
- 所有显示内容通过 props 或 data 驱动，避免硬编码
- 使用计算属性处理数据转换（如时间格式化）
- 响应式更新班次状态

## 前端技术栈
- Vue 3（Composition API 或 Options API）
- Uni-app（支持微信小程序、H5、APP）
- SCSS（样式预处理）
- Async/Await（异步处理）

## 测试场景

### 场景1：未签到（初始状态）
- 显示蓝色渐变班次卡片
- 按钮为"立即签到"
- 点击签到后状态变为"已签到"

### 场景2：已签到（工作中）
- 显示白色卡片，左侧绿色竖条
- 显示签到时间与工作时长
- 无按钮，仅显示信息

### 场景3：待签退（工作结束）
- 显示橙色边框卡片
- 有"⚠️ 请记得签退"提示
- 按钮为"立即签退"

## 后续开发建议

### 短期（1-2周）
1. 接入真实后端 API，替换 Mock 数据
2. 完善定位功能与权限处理
3. 实现消息推送与待办提醒实时更新
4. 调试 Tab 导航路由跳转

### 中期（2-4周）
1. 实现工作笔记功能模块
2. 实现消息中心功能
3. 添加工作数据统计与分析页面
4. 优化加载性能（图片懒加载等）

### 长期（1-2月）
1. 数据缓存策略（离线模式）
2. 实时通知系统（WebSocket）
3. 数据同步机制
4. 用户行为分析

## 注意事项

1. **定位权限**：小程序环境下需在 manifest.json 中声明定位权限，并在用户首次使用时请求授权。
2. **安全区域**：底部 Tab 需适配 iPhone X 等刘海屏，使用 `env(safe-area-inset-bottom)`。
3. **性能优化**：列表数据超过 10 条时建议分页加载。
4. **错误处理**：所有 API 请求都应有 try-catch 和 fail 回调。
5. **测试工具**：建议使用 Mock 数据进行开发与单元测试，确保业务逻辑正确再接入真实 API。

---

**维护人**: 项目团队  
**最后更新**: 2025-11-19
